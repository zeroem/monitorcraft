input {
  redis {
    host => "{{ logstash_redis_host }}"
    port => "{{ logstash_redis_port }}"
    data_type => "channel"
    key => "logstash"
  }
  file {
    path => [ "/var/log/syslog" ]
    type => "syslog"
  }
  file {
    path => [ "/var/log/upstart/{{ logstash_upstart_name }}.log" ]
    type => "logstash"
  }
}

filter {
  grok {
    type => "syslog"
    match => [ "message", "^%{SYSLOGBASE}(?<syslog>.*)" ]
  }
}

output {
  elasticsearch { embedded => true }
}
